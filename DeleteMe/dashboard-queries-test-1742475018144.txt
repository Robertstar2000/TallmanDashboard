
--- SQLite Chart Data ---
Found 7 rows in chart_data table
Sample chart data:
- Key Metrics - Total Orders: SQL = SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOL...
- Key Metrics - Open Orders: SQL = SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOL...
- Key Metrics - Open Orders 2: SQL = SELECT ISNULL(SUM(l.extended_price), 0) as value F...

--- P21 Connection Test ---
Using Windows Authentication with ODBC
Connection string: DSN=P21Play;Trusted_Connection=Yes;
Connecting to ODBC data source...
✅ CONNECTED SUCCESSFULLY to ODBC data source!

--- Dashboard Queries Test ---

=== Testing Hard-Coded Queries ===

--- Total Orders ---
Original query: SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOLOCK) WHERE order_date >= DATEADD(day, -7, GETDATE())

Default (dbo):
Query: SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOLOCK) WHERE order_date >= DATEADD(day, -7, GETDATE())
✅ Query executed successfully in 5ms
✅ Value: 18 (type: number)
✅ SUCCESS: Query returned non-zero value: 18
Raw result: {"value":18}

No schema:
Query: SELECT COUNT(*) as value FROM oe_hdr WITH (NOLOCK) WHERE order_date >= DATEADD(day, -7, GETDATE())
✅ Query executed successfully in 4ms
✅ Value: 18 (type: number)
✅ SUCCESS: Query returned non-zero value: 18
Raw result: {"value":18}

P21.dbo schema:
Query: SELECT COUNT(*) as value FROM P21.dbo.oe_hdr WITH (NOLOCK) WHERE order_date >= DATEADD(day, -7, GETDATE())
❌ Query execution failed: [odbc] Error executing the sql statement
Stack: Error: [odbc] Error executing the sql statement

--- Open Orders ---
Original query: SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOLOCK) WHERE completed = 'N'

Default (dbo):
Query: SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOLOCK) WHERE completed = 'N'
✅ Query executed successfully in 1ms
✅ Value: 2034 (type: number)
✅ SUCCESS: Query returned non-zero value: 2034
Raw result: {"value":2034}

No schema:
Query: SELECT COUNT(*) as value FROM oe_hdr WITH (NOLOCK) WHERE completed = 'N'
✅ Query executed successfully in 1ms
✅ Value: 2034 (type: number)
✅ SUCCESS: Query returned non-zero value: 2034
Raw result: {"value":2034}

P21.dbo schema:
Query: SELECT COUNT(*) as value FROM P21.dbo.oe_hdr WITH (NOLOCK) WHERE completed = 'N'
❌ Query execution failed: [odbc] Error executing the sql statement
Stack: Error: [odbc] Error executing the sql statement

--- Open Orders 2 ---
Original query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM dbo.oe_hdr h WITH (NOLOCK) JOIN dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE h.completed = 'N'

Default (dbo):
Query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM dbo.oe_hdr h WITH (NOLOCK) JOIN dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE h.completed = 'N'
✅ Query executed successfully in 128ms
✅ Value: 24643150.24 (type: number)
✅ SUCCESS: Query returned non-zero value: 24643150.24
Raw result: {"value":24643150.24}

No schema:
Query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM oe_hdr h WITH (NOLOCK) JOIN oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE h.completed = 'N'
✅ Query executed successfully in 129ms
✅ Value: 24643150.24 (type: number)
✅ SUCCESS: Query returned non-zero value: 24643150.24
Raw result: {"value":24643150.24}

P21.dbo schema:
Query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM P21.dbo.oe_hdr h WITH (NOLOCK) JOIN P21.dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE h.completed = 'N'
❌ Query execution failed: [odbc] Error executing the sql statement
Stack: Error: [odbc] Error executing the sql statement

--- Daily Revenue ---
Original query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM dbo.oe_hdr h WITH (NOLOCK) JOIN dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE CONVERT(date, h.order_date) = CONVERT(date, DATEADD(day, -1, GETDATE()))

Default (dbo):
Query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM dbo.oe_hdr h WITH (NOLOCK) JOIN dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE CONVERT(date, h.order_date) = CONVERT(date, DATEADD(day, -1, GETDATE()))
✅ Query executed successfully in 27ms
✅ Value: 75500 (type: number)
✅ SUCCESS: Query returned non-zero value: 75500
Raw result: {"value":75500}

No schema:
Query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM oe_hdr h WITH (NOLOCK) JOIN oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE CONVERT(date, h.order_date) = CONVERT(date, DATEADD(day, -1, GETDATE()))
✅ Query executed successfully in 34ms
✅ Value: 75500 (type: number)
✅ SUCCESS: Query returned non-zero value: 75500
Raw result: {"value":75500}

P21.dbo schema:
Query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM P21.dbo.oe_hdr h WITH (NOLOCK) JOIN P21.dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE CONVERT(date, h.order_date) = CONVERT(date, DATEADD(day, -1, GETDATE()))
❌ Query execution failed: [odbc] Error executing the sql statement
Stack: Error: [odbc] Error executing the sql statement

--- Open Invoices ---
Original query: SELECT COUNT(*) as value FROM dbo.invoice_hdr WITH (NOLOCK) WHERE invoice_date >= DATEADD(month, -1, GETDATE())

Default (dbo):
Query: SELECT COUNT(*) as value FROM dbo.invoice_hdr WITH (NOLOCK) WHERE invoice_date >= DATEADD(month, -1, GETDATE())
✅ Query executed successfully in 1ms
✅ Value: 1 (type: number)
✅ SUCCESS: Query returned non-zero value: 1
Raw result: {"value":1}

No schema:
Query: SELECT COUNT(*) as value FROM invoice_hdr WITH (NOLOCK) WHERE invoice_date >= DATEADD(month, -1, GETDATE())
✅ Query executed successfully in 1ms
✅ Value: 1 (type: number)
✅ SUCCESS: Query returned non-zero value: 1
Raw result: {"value":1}

P21.dbo schema:
Query: SELECT COUNT(*) as value FROM P21.dbo.invoice_hdr WITH (NOLOCK) WHERE invoice_date >= DATEADD(month, -1, GETDATE())
❌ Query execution failed: [odbc] Error executing the sql statement
Stack: Error: [odbc] Error executing the sql statement

--- Orders Backlogged ---
Original query: SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOLOCK) WHERE completed = 'N' AND order_date >= DATEADD(day, -30, GETDATE())

Default (dbo):
Query: SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOLOCK) WHERE completed = 'N' AND order_date >= DATEADD(day, -30, GETDATE())
✅ Query executed successfully in 1ms
✅ Value: 27 (type: number)
✅ SUCCESS: Query returned non-zero value: 27
Raw result: {"value":27}

No schema:
Query: SELECT COUNT(*) as value FROM oe_hdr WITH (NOLOCK) WHERE completed = 'N' AND order_date >= DATEADD(day, -30, GETDATE())
✅ Query executed successfully in 0ms
✅ Value: 27 (type: number)
✅ SUCCESS: Query returned non-zero value: 27
Raw result: {"value":27}

P21.dbo schema:
Query: SELECT COUNT(*) as value FROM P21.dbo.oe_hdr WITH (NOLOCK) WHERE completed = 'N' AND order_date >= DATEADD(day, -30, GETDATE())
❌ Query execution failed: [odbc] Error executing the sql statement
Stack: Error: [odbc] Error executing the sql statement

--- Total Monthly Sales ---
Original query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM dbo.oe_hdr h WITH (NOLOCK) JOIN dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE h.order_date >= DATEADD(day, -30, GETDATE())

Default (dbo):
Query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM dbo.oe_hdr h WITH (NOLOCK) JOIN dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE h.order_date >= DATEADD(day, -30, GETDATE())
✅ Query executed successfully in 5ms
✅ Value: 1708263.24 (type: number)
✅ SUCCESS: Query returned non-zero value: 1708263.24
Raw result: {"value":1708263.24}

No schema:
Query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM oe_hdr h WITH (NOLOCK) JOIN oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE h.order_date >= DATEADD(day, -30, GETDATE())
✅ Query executed successfully in 11ms
✅ Value: 1708263.24 (type: number)
✅ SUCCESS: Query returned non-zero value: 1708263.24
Raw result: {"value":1708263.24}

P21.dbo schema:
Query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM P21.dbo.oe_hdr h WITH (NOLOCK) JOIN P21.dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE h.order_date >= DATEADD(day, -30, GETDATE())
❌ Query execution failed: [odbc] Error executing the sql statement
Stack: Error: [odbc] Error executing the sql statement

=== Testing SQLite Database Queries ===
Found 7 P21 queries in the SQLite database

--- Key Metrics - Total Orders ---
Original query: SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOLOCK) WHERE order_date >= DATEADD(day, -7, GETDATE())

Executing query:
Query: SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOLOCK) WHERE order_date >= DATEADD(day, -7, GETDATE())
✅ Query executed successfully in 5ms
✅ Value: 18 (type: number)
✅ SUCCESS: Query returned non-zero value: 18
Raw result: {"value":18}

--- Key Metrics - Open Orders ---
Original query: SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOLOCK) WHERE completed = 'N'

Executing query:
Query: SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOLOCK) WHERE completed = 'N'
✅ Query executed successfully in 1ms
✅ Value: 2034 (type: number)
✅ SUCCESS: Query returned non-zero value: 2034
Raw result: {"value":2034}

--- Key Metrics - Open Orders 2 ---
Original query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM dbo.oe_hdr h WITH (NOLOCK) JOIN dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE h.completed = 'N'

Executing query:
Query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM dbo.oe_hdr h WITH (NOLOCK) JOIN dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE h.completed = 'N'
✅ Query executed successfully in 142ms
✅ Value: 24643150.24 (type: number)
✅ SUCCESS: Query returned non-zero value: 24643150.24
Raw result: {"value":24643150.24}

--- Key Metrics - Daily Revenue ---
Original query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM dbo.oe_hdr h WITH (NOLOCK) JOIN dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE CONVERT(date, h.order_date) = CONVERT(date, DATEADD(day, -1, GETDATE()))

Executing query:
Query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM dbo.oe_hdr h WITH (NOLOCK) JOIN dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE CONVERT(date, h.order_date) = CONVERT(date, DATEADD(day, -1, GETDATE()))
✅ Query executed successfully in 24ms
✅ Value: 75500 (type: number)
✅ SUCCESS: Query returned non-zero value: 75500
Raw result: {"value":75500}

--- Key Metrics - Open Invoices ---
Original query: SELECT COUNT(*) as value FROM dbo.invoice_hdr WITH (NOLOCK) WHERE invoice_date >= DATEADD(month, -1, GETDATE())

Executing query:
Query: SELECT COUNT(*) as value FROM dbo.invoice_hdr WITH (NOLOCK) WHERE invoice_date >= DATEADD(month, -1, GETDATE())
✅ Query executed successfully in 0ms
✅ Value: 1 (type: number)
✅ SUCCESS: Query returned non-zero value: 1
Raw result: {"value":1}

--- Key Metrics - Orders Backlogged ---
Original query: SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOLOCK) WHERE completed = 'N' AND order_date >= DATEADD(day, -30, GETDATE())

Executing query:
Query: SELECT COUNT(*) as value FROM dbo.oe_hdr WITH (NOLOCK) WHERE completed = 'N' AND order_date >= DATEADD(day, -30, GETDATE())
✅ Query executed successfully in 1ms
✅ Value: 27 (type: number)
✅ SUCCESS: Query returned non-zero value: 27
Raw result: {"value":27}

--- Key Metrics - Total Monthly Sales ---
Original query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM dbo.oe_hdr h WITH (NOLOCK) JOIN dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE h.order_date >= DATEADD(day, -30, GETDATE())

Executing query:
Query: SELECT ISNULL(SUM(l.extended_price), 0) as value FROM dbo.oe_hdr h WITH (NOLOCK) JOIN dbo.oe_line l WITH (NOLOCK) ON h.order_no = l.order_no WHERE h.order_date >= DATEADD(day, -30, GETDATE())
✅ Query executed successfully in 7ms
✅ Value: 1708263.24 (type: number)
✅ SUCCESS: Query returned non-zero value: 1708263.24
Raw result: {"value":1708263.24}

--- Connection closed ---
