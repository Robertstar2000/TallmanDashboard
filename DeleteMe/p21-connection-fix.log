
Connection parameters:
  - DSN: P21Play
  - Username: SA
  - Database: P21Play
  - Authentication: SQL Server

=== Step 1: Establish ODBC Connection ===
Connection string: DSN=P21Play;UID=SA;PWD=********;
✅ Connection successful!

=== Step 2: Verify and Switch Database ===
Current database: master
Switching to P21Play database...
Successfully switched to: P21Play

=== Step 3: Check System Parameters Table ===
✅ system_parameters table exists
Found 1 rows in system_parameters table.

=== Step 4: Check sys_params_p21 Table ===
✅ sys_params_p21 table exists
Found 5 rows in sys_params_p21 table.

=== Step 5: Check sy_param Table ===
❌ sy_param table does not exist - this is the source of the error

Tables starting with "sy_":
- sys_params_p21
- sysdiagrams
- system_alerts
- system_parameters
- system_setting

=== SOLUTION ===
Based on the database analysis, here is the solution to fix the "Invalid object name" error:

1. Update your connection configuration:
   - Set the default database to "P21Play" instead of "P21"
   - Use SQL Server authentication with your credentials

2. Update your SQL queries:
   - Replace references to "sy_param" with "system_parameters" or "sys_params_p21"
   - Example: Change "SELECT * FROM sy_param" to "SELECT * FROM system_parameters"

3. Ensure proper database switching:
   - Add "USE P21Play;" at the beginning of your SQL queries if needed
   - Or update your connection manager to explicitly switch to P21Play after connecting

4. Update environment variables:
   - Set P21_DATABASE=P21Play
   - Set P21_DSN=P21Play
   - Set P21_USERNAME and P21_PASSWORD for SQL authentication

These changes will resolve the "Invalid object name 'sy_param'" error.

Connection closed successfully.

Fix script completed.
